"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("allXL"),n=document.getElementById("spot"),c=(n.getElementsByTagName("li"),e.getElementsByClassName("chice"),document.getElementById("ding")),o=document.getElementById("dingdan"),t=document.getElementById("ErWeiMa"),a=document.getElementById("QRcode"),s=document.getElementById("unfold"),i=document.getElementById("list"),l=document.getElementById("oppen"),d=document.getElementById("pageList"),r=document.getElementById("asc"),m=document.getElementById("desc");e.onmouseenter=function(){n.style.display="block"},e.onmouseleave=function(){n.style.display="none"},c.onmouseenter=function(){o.style.display="block"},c.onmouseleave=function(){o.style.display="none"},t.onmouseenter=function(){a.style.display="block"},t.onmouseleave=function(){a.style.display="none"},s.onclick=function(){console.log(l.className),"before"==l.className?(i.style.height="688px",l.classList.add("after"),l.innerHTML="收起"):(l.classList.remove("after"),i.style.height="273px",l.innerHTML="展开")};var p=document.querySelector("#prev"),u=document.querySelector("#next"),h=document.getElementById("pages"),g=0;function y(e){var n=e.datalist.map(function(e){return'<dl  class="pageList" data-id="'+e.id+'">\n                    <dt>\n                        <img src="'+e.img1+'" alt="" />\n                        <div class="minpic">\n                            <span class="fl"> < </span>\n                            <span>\n                            <img style="border:1px solid #DDDDDD" class="minimg" src="'+e.img1+'" alt="" />\n                        </span>\n                            <span class="fr"> > </span>\n                        </div>\n                    </dt>\n                    <dd>\n                        <p style="font-size: 10px;">'+e.price+' <del>¥229.00</del></p>\n                        <p style="overflow:hidden;">'+e.title1+'</p>\n                        <p style="margin-bottom: 10px;color:#999999">已售出<span style="color:#FF6652" > 6 </span>件</p>\n                        <p>'+e.footage+"</p>\n                    </dd>\n                </dl>\n                        "}).join("");d.innerHTML=n}var f="../api/list.php";ajax("GET",f,"page=1&qty=50",function(e){for(var n=JSON.parse(e),c=0;c<n.datalist.length;c++)y(n);var o=n.total,t=n.qty,a=Math.ceil(o/t);g=a;var s="";for(c=0;c<g;c++)s+="<span>"+(c+1)+"</span>";h.innerHTML=s,h.children[0].className="active",2<=a&&(u.style.display="block")});var v=1;function $(e){p.style.display=1!=e?"block":"none",u.style.display=e!=g?"block":"none"}function N(){var e=r.className,n=m.className;console.log(e),console.log(n),data="active"===e?(console.log(123),f="../api/order1.php","num=1&qty=50&page="+v):(f="active"===n?"../api/order1.php":"../api/list.php","qty=50&page="+v)}h.onclick=function(e){"span"==(e=e||window.event).target.tagName.toLowerCase()&&(v=e.target.innerText,N(),ajax("GET",f,data,function(e){var n=JSON.parse(e);console.log(n),y(n),$(v);for(var c=0;c<h.children.length;c++)h.children[c].className="";h.children[v-1].className="active"}))},p.onclick=function(){--v<=1&&(v=1),$(v),N(),ajax("GET",f,data,function(e){y(JSON.parse(e));for(var n=0;n<h.children.length;n++)h.children[n].className="";h.children[v-1].className="active"})},u.onclick=function(){g<=++v&&(v=g),$(v),N(),ajax("GET",f,data,function(e){y(JSON.parse(e));for(var n=0;n<h.children.length;n++)h.children[n].className="";h.children[v-1].className="active"})},function(){var e=Cookie.get("condition");console.log(e),data="asc"===e?(r.className="active",console.log(123),f="../api/order1.php","num=1&qty=50&page=1"):(f="desc"===e?(m.className="active","../api/order1.php"):"../api/list.php","qty=50&page=1");ajax("GET",f,data,function(e){var n=JSON.parse(e);console.log(n),y(n)})}(),r.onclick=function(){r.className="active",m.className="",Cookie.set("condition","asc",{}),N(),ajax("GET",f,data,function(e){var n=JSON.parse(e);console.log(n),y(n)})},m.onclick=function(){m.className="active",r.className="",Cookie.set("condition","desc",{}),N(),ajax("GET",f,data,function(e){var n=JSON.parse(e);console.log(n),y(n)})};var k=document.getElementById("free");k.onclick=function(){Cookie.get("username")?(console.log(123),location.href="main.html",Cookie.remove("username"),k.innerHTML="免费注册"):location.href="reg.html"}}),$(function(){if(state(),$("#pageList").on("click","dl",function(){$id=$(this).attr("data-id"),console.log($id),location.href="detail.html?id="+$id}),$("#spot li").on("mouseover",function(){$("#chice .chice").css("display","none"),$("#chice .chice").eq($(this).index()).css("display","block")}),$("#spot li").on("mouseout",function(){$("#chice .chice").eq($(this).index()).css("display","block")}),$("#chice .chice").on("mouseover",function(){$("#chice .chice").eq($(this).index()).css("display","block")}),$("#chice .chice").on("mouseout",function(){$("#chice .chice").css("display","none")}),$(".dh_c .dh_cT1").on("mouseover",function(){$(".dh_c .dh_cT1 .dh_cNZ").css("display","block")}),$(".dh_c .dh_cT1").on("mouseleave",function(){$(".dh_c .dh_cT1 .dh_cNZ").css("display","none")}),$(".dh_c .dh_cT2").on("mouseover",function(){$(".dh_c .dh_cT2 .dh_cNV").css("display","block")}),$(".dh_c .dh_cT2").on("mouseleave",function(){$(".dh_c .dh_cT2 .dh_cNV").css("display","none")}),$(".dh_c .dh_cT3").on("mouseover",function(){$(".dh_c .dh_cT3 .dh_cTZ").css("display","block")}),$(".dh_c .dh_cT3").on("mouseleave",function(){$(".dh_c .dh_cT3 .dh_cTZ").css("display","none")}),Cookie.get("username")){var e=Cookie.get("username");$.ajax({type:"post",url:"../api/mycart.php",async:!0,data:{username:e},success:function(e){var n=JSON.parse(e);console.log(n),$(".quantity").html(n.length)}})}$(".mycart").on("click",function(){Cookie.get("username")?location.href="cart.html":alert("您还没有登录噢!")}),$("#login").on("click",function(){location.href="enter.html"})});